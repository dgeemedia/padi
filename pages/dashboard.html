<!--dashboard-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MyPadiMan Dashboard</title>
  <link rel="stylesheet" href="../src/css/dashboard.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script defer src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>
<body>
<!-- Sidebar -->
<aside class="sidebar">
  <div class="brand">
    <div class="avatar-badge" id="sidebarAvatar">ðŸ‘¤</div>
    <span>MyPadiMan</span>

    <!-- Auth controls (dashboard hosts Logout only) -->
    <button id="btnLogout" class="btn-save" style="margin-top:12px; display:none; background:#f44336;">Logout</button>
    <span id="profileNameDisplay" style="display:block;margin-top:8px;color:#fff"></span>
  </div>

  <ul>
    <li class="active">Profile Setup</li>
    <li>Tasks</li>
    <li>Wallet</li>
    <li>Orders</li>
    <li>Settings</li>
    <li>Logout</li>
  </ul>
</aside>

  <!-- Main Content -->
  <main class="dashboard">
    <!-- Header -->
    <header class="dashboard-header">
      <h1>Welcome to MyPadiMan</h1>
      <p>Update your profile and start posting or accepting errands.</p>

      <!-- Verification banner (QA) -->
      <div id="verificationBanner" class="verify-banner" style="margin-top:12px;"></div>
      <!-- helper to show verify link returned from server (hidden until used) -->
      <div id="verifyLinkContainer" style="display:none;margin-top:8px;">
        <small>Verification link (mock): <a id="verifyLink" href="#" target="_blank" rel="noopener noreferrer"></a></small>
        <button id="copyVerifyLink" class="btn-save" style="margin-left:8px">Copy</button>
      </div>
    </header>

    <!-- Profile Setup Form -->
    <form class="profile-form">
      <section class="form-section">
        <h2>Profile Picture (Optional)</h2>
        <input type="file" id="profilePhoto" name="profilePhoto" accept="image/*" />
        <div id="profilePhotoPreview" class="photo-preview"></div>
      </section>

      <section class="form-section">
        <h2>Choose Your Role</h2>
        <label><input type="checkbox" name="role" value="runner"> Runner</label>
        <label><input type="checkbox" name="role" value="artisan"> Artisan</label>
        <label><input type="checkbox" name="role" value="business"> Business Owner</label>

        <div id="role-specific-fields"></div>
      </section>

      <section class="form-section">
        <h2>Phone Number</h2>
        <input type="tel" name="phone" placeholder="+234 800 000 0000" required />
      </section>

      <section class="form-section">
        <h2>Update Location</h2>
        <label for="country">Country</label>
        <select id="country" name="country" required>
          <option value="">-- Select Country --</option>
          <option value="Nigeria">Nigeria</option>
        </select>

        <label for="state">State</label>
        <select id="state" name="state" required>
          <option value="">-- Select State --</option>
        </select>

        <label for="lga">Local Government</label>
        <select id="lga" name="lga" required>
          <option value="">-- Select LGA --</option>
        </select>

        <label for="address">Address</label>
        <textarea id="address" name="address" placeholder="Enter your exact address" required></textarea>
      </section>

      <button type="submit" class="btn-save">Save & Continue</button>
    </form>

    <!-- Post Task -->
    <section class="form-section task-section">
      <h2>Post a New Task / Errand</h2>
      <input type="text" id="task-title" placeholder="Task title" required />
      <textarea id="task-desc" placeholder="Describe your task" required></textarea>
      <button type="button" id="btnPostTask" class="btn-save">Post Task</button>
    </section>

    <div id="map" style="height:320px"></div>

    <!-- Available Tasks -->
    <section class="form-section">
      <h2>Available Tasks Near You</h2>
      <div id="tasks-list" class="tasks-list"></div>
    </section>
    
  </main>

  <!-- AI Assistant Widget -->
  <div id="ai-chat-widget">
    <div id="ai-chat-header">ðŸ¤– MyPadiMan AI Assistant</div>
    <div id="chat-messages"></div>
    <div id="chat-input">
      <input type="text" id="userInput" placeholder="Ask me anything...">
      <button id="btnSendPrompt">Send</button>
    </div>
  </div>

  <!-- Runtime Config (shared) -->
  <script>
    window.MYPADIMAN_CONFIG = {
      serverMode: true,                     // flip to true to use backend
      baseUrl: "http://localhost:4000" // set your API root
    };
  </script>

  <!-- ES Module Entry -->
  <script type="module" src="../src/js/dashboardmain.js"></script>
</body>
</html>
